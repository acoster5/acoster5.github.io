<script>
   (function (g, e, n, es, ys) {
    g['_genesysJs'] = e;
    g[e] = g[e] || function () {
      (g[e].q = g[e].q || []).push(arguments)
    };
    g[e].t = 1 * new Date();
    g[e].c = es;
    ys = document.createElement('script'); ys.async = 1; ys.src = n; ys.charset = 'utf-8'; document.head.appendChild(ys);
  })(window, 'Genesys', 'https://apps.mypurecloud.ie/genesys-bootstrap/genesys.min.js', {
    environment: ‘xxxxxxx’,
    deploymentId: ‘000000000000’
  });
</script>
<script>window.Genesys('subscribe','Journey.ready',function(){window.Genesys("command","Journey.formsTrack",{selector:"#guideContainerForm",captureFormDataOnAbandon:true,captureFormDataOnSubmit:true,traitsMapper:[{"fieldName":"guideContainer-rootPanel-panel-panel-guidetextbox_1646282___jqName","traitName":"familyName"},{"fieldName":"guideContainer-rootPanel-panel-panel-guidetextbox_1599178___jqName","traitName":"givenName"},{"fieldName":"guideContainer-rootPanel-panel-panel-guidetextbox___jqName","traitName":"otherPhone"},{"fieldName":"guideContainer-rootPanel-panel-panel-guideemail___jqName","traitName":"email"},]});window.Genesys("command","Journey.trackScrollDepth",{scrollDepthEvents:[{percentage:70,eventName:"Event_Scroll_Page",customAttributes:{'ScrollValue':70}},]});(function(){var DELAYS=[30000,60000,120000,180000,300000];var lastHref=location.href;var visibleElapsed=0;var lastVisStamp=performance.now();var isVisible=(document.visibilityState==='visible');var timers=[];var fired=[];function clearAll(){timers.forEach(clearTimeout);timers=[];window.routeDelayTimers=timers}function scheduleAll(reason){clearAll();for(var i=0;i<DELAYS.length;i++){if(fired[i])continue;var remaining=DELAYS[i]-visibleElapsed;if(remaining<=0){fireMilestone(i,reason+'-catchup')}else{(function(idx,wait){var id=setTimeout(function(){fireMilestone(idx,reason)},wait);timers.push(id)})(i,remaining)}}window.routeDelayTimers=timers}function fireMilestone(idx,reason){if(fired[idx])return;fired[idx]=true;try{if(window.Genesys){window.Genesys('command','Journey.record',{eventName:'Event_Timer',customAttributes:{'Timer':(DELAYS[idx]/1000)+'s'}})}}catch(e){console.warn('Genesys record failed',e)}console.log('xxxx Timeout '+(idx+1)+' after '+(DELAYS[idx]/1000)+'s',{reason:reason,visibleSeconds:(visibleElapsed/1000).toFixed(1)})}function handleVisibilityChange(reason){var now=performance.now();if(isVisible){visibleElapsed+=(now-lastVisStamp)}isVisible=(document.visibilityState==='visible');lastVisStamp=now;if(isVisible){scheduleAll(reason||'visible')}else{clearAll()}}function startTimers(reason){clearAll();visibleElapsed=0;fired=Array(DELAYS.length).fill(false);lastVisStamp=performance.now();isVisible=(document.visibilityState==='visible');handleVisibilityChange(reason||'start')}function maybeRestart(reason){var href=location.href;if(href!==lastHref){lastHref=href;startTimers(reason)}}window.addEventListener('pageshow',function(e){startTimers(e&&e.persisted?'pageshow-bfcache':'pageshow')});document.addEventListener('visibilitychange',function(){handleVisibilityChange('visibilitychange')});window.addEventListener('popstate',function(){maybeRestart('popstate')});window.addEventListener('hashchange',function(){maybeRestart('hashchange')});['pushState','replaceState'].forEach(function(fn){var orig=history[fn];history[fn]=function(){var ret=orig.apply(this,arguments);setTimeout(function(){maybeRestart(fn)},0);return ret}});window._restartRouteTimers=function(){startTimers('manual')}})();function installSuccessTextWatcher(){const FORM_SEL='#guideContainerForm';const traitsMapper=[{fieldName:"guideContainer-rootPanel-panel-panel-guidetextbox_1646282___jqName",traitName:"familyName"},{fieldName:"guideContainer-rootPanel-panel-panel-guidetextbox_1599178___jqName",traitName:"givenName"},{fieldName:"guideContainer-rootPanel-panel-panel-guidetextbox___jqName",traitName:"otherPhone"},{fieldName:"guideContainer-rootPanel-panel-panel-guideemail___jqName",traitName:"email"}];const SUCCESS_H3_SEL=[`${FORM_SEL} .guideTextDraw.guideStaticText h3`,`${FORM_SEL} [data-guide-view-bind*="guidetextdraw"] h3`,`${FORM_SEL} [id*="guidetextdraw"] h3`].join(', ');let logged=false;let armed=false;document.addEventListener('change',(e)=>{const form=document.querySelector(FORM_SEL);if(form&&form.contains(e.target))armed=true},true);document.addEventListener('click',(e)=>{const sel=`${FORM_SEL} .buttonFerrari, ${FORM_SEL} button[type="button"], ${FORM_SEL} button[type="submit"], ${FORM_SEL} input[type="submit"]`;const btn=e.target&&e.target.closest&&e.target.closest(sel);if(btn)armed=true},true);function isVisible(el){if(!el)return false;const cs=getComputedStyle(el);if(cs.visibility==='hidden'||cs.display==='none')return false;return!!(el.offsetParent||el.getClientRects().length)}function check(reason){if(logged)return true;if(!armed)return false;const nodes=document.querySelectorAll(SUCCESS_H3_SEL);for(const h3 of nodes){const text=(h3.textContent||'').trim();if(text&&isVisible(h3)){const form=document.querySelector(FORM_SEL);let customAttributes={};if(form){traitsMapper.forEach(({fieldName,traitName})=>{const el=form.querySelector(`[name="${fieldName}"]`);if(!el)return;let val='';if(el.type==='checkbox'){val=el.checked?'true':'false'}else if(el.type==='radio'){const checked=form.querySelector(`input[name="${fieldName}"]:checked`);val=checked?checked.value:''}else{val=(el.value||'')}val=String(val).trim();if(val)customAttributes[fieldName]=val})}if(!Object.keys(customAttributes).length)return false;logged=true;console.log('xxxx FormSubmitted (success text detected)',{reason,textPreview:text.slice(0,160)});if(window.Genesys){window.Genesys('subscribe','Journey.ready',function(){window.Genesys('command','Journey.record',{eventName:'form_submitted',customAttributes,traitsMapper})})}return true}}return false}if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',()=>check('DOMContentLoaded'))}else{check('already-loaded')}window.addEventListener('pageshow',()=>check('pageshow'));const mo=new MutationObserver(()=>check('mutation'));mo.observe(document.body,{childList:true,subtree:true,attributes:true,attributeFilter:['class','style','hidden','aria-hidden']});const pollId=setInterval(()=>{if(check('poll'))clearInterval(pollId)},400)}installSuccessTextWatcher();(function(){const SUCCESS_WRAPPER='[class^="NewsletterForm__successWrapper__"], [class*=" NewsletterForm__successWrapper__"]';const EMAIL_HIGHLIGHT='[class^="NewsletterForm__highlight__"], [class*=" NewsletterForm__highlight__"]';let fired=false;function isVisible(el){if(!el)return false;const cs=getComputedStyle(el);if(cs.visibility==='hidden'||cs.display==='none')return false;return!!(el.offsetParent||el.getClientRects().length)}function extractEmail(text){const m=(text||'').match(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/i);return m?m[0]:null}function check(reason){if(fired)return true;const wrapper=document.querySelector(SUCCESS_WRAPPER);if(!wrapper||!isVisible(wrapper))return false;let email=null;const p=wrapper.querySelector(EMAIL_HIGHLIGHT);if(p&&isVisible(p)){email=extractEmail(p.textContent)}if(!email){for(const el of wrapper.querySelectorAll('p, span, div')){if(!isVisible(el))continue;email=extractEmail(el.textContent);if(email)break}}if(!email)return false;fired=true;console.log('xxxx Newsletter confirmation detected',{reason,email});try{if(window.Genesys){window.Genesys('command','Journey.record',{eventName:'newsletter_submit',customAttributes:{email}})}}catch(e){console.warn('Genesys record failed',e)}return true}check('init');const mo=new MutationObserver(()=>check('mutation'));mo.observe(document.body,{childList:true,subtree:true,attributes:true,attributeFilter:['class','style','hidden','aria-hidden']});document.addEventListener('click',(e)=>{const btn=e.target&&e.target.closest&&e.target.closest('button');if(!btn)return;if(btn.closest('[class^="NewsletterForm__"], [class*=" NewsletterForm__"]')){setTimeout(()=>check('button-click'),80)}},true);let tries=20;const poll=setInterval(()=>{if(check('poll')||--tries<=0)clearInterval(poll)},300)})();});</script>